# 使用 Forth 進行浮點運算

浮點數 (floating point) 是電腦用來表示實數的方式。浮點數不是實數，只能近似實數。這產生種種問題。因此，如果你是位工作上需要處理浮點數的工程師，務必閱讀以下文件：

* David Goldberg 的 [What Every Computer Scientist Should Know About Floating-Point Arithmetic](https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

Forth 提供浮點運算能力，浮點運算類似整數運算，但有以下不同，

* 輸入浮點數必須有字母 `e`。字母 `e` 後的整數是指數。若沒有整數，指數為 1。
例子：`1e` `1.e` `1.e0` `+1.23e-1` `-1.23e+1`。
* 四則運算指令以 `f` 開頭。比如 `f+`、`f-`、`f*`、`f/`。
* 沒有和 `mod` 及 `/mod` 對應的指令，但有求次方的指令 `f**`，其堆疊效果為 ( F: n1 n2 -- n1<sup>n2</sup>)。
* 資料堆疊放的是整數，浮點數放在另一個浮點堆疊 (floating point stack) 上。
* 浮點數的堆疊效果表示法是 ( F: before -- after )。

讓我們測試一下。

例一：輸入 `1e` `1.e` `1.e0` `+1.23e-1` `-1.23e+1` 並以 `f.` 印出來。
```
rf> 1e f.  1.e f.  1.e0 f.  +1.23e-1 f.  -1.23e+1 f.
1.0000000 1.0000000 1.0000000 0.1230000 -12.3000000  ok
```

例二：以浮點計算 7 + (6 &times; 5<sup>2</sup> + 3)
```
rf> 5e 2e f** 6e f* 3e f+ 7e f+ f.
160.0000000  ok
```

例三：以浮點計算 1/(3<sup>2</sup>)
```
rf> 1e 3e 2e f** f/  f.
0.1111111  ok
```
-----------
## 浮點數運算

TODO

### 本節指令集

| 指令 | 堆疊效果           | 說明                        | 口語唸法 |
|-----|-------------------|-----------------------------|--------|
| `f+` | ( F:&nbsp; f1 f2 -- f1+f2 )|  | f-plus |
| `f-` | ( F:&nbsp; f1 f2 -- f1-f2 )|  | f-minus |
| `f*` | ( F:&nbsp; f1 f2 -- f1*f2 )          |  | f-star |
| `f/` | ( F:&nbsp; f1 f2 -- f1/f2 )          |  | f-slash |

-----------
## 更多的浮點數運算

TODO

-------------
## 本章重點整理

* 浮點數 (floating point)

-------------------------------------
## 本章指令集
